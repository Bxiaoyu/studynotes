# 常见的请求头与响应头

## 1.爬虫特别关注的几个请求头

* host                      (域名)
* Connection                (长连接)
* Upgrade-Insecure-Requests (升级为https请求)
* **User-Agent**            (用户代理， 提供系统信息和浏览器信息)
* **Referer**               (页面跳转处，防盗链（图片/视频）)
* **Cookie**                (状态保持)
* Authorization             (用于表示HTTP协议中需要认证资源的认证信息)

## 2.响应头

* Set-Cookie (在响应体中特别注意此set-cookie)

## 3.常见的响应状态码

* 200：成功
* 302：跳转，新的url在响应的Location头中给出
* 303：浏览器对于POST的响应进行重定向至新的url
* 307：浏览器对于GET的响应重定向至新的url
* 403：资源不可用；服务器理解客户的请求，但拒绝处理它（没有权限）
* 404：找不到该页面
* 500：服务器内部错误
* 503：服务器由于维护或者负载过重未能应答，在相应中可能会携带Retry-After响应头；有可能因为爬虫频繁访问url，使服务器忽视爬虫的请求，最终返回503响应状态码

> Network中抓包得到的源码才是判断依据；Elements中的源码是渲染之后的源码，不能作为判断标准

***注意：*** 站点的开发或者运维人员为了阻止数据被爬虫轻易获取，可能在状态码上做手脚，也就是说返回的状态码不一定是真实的，比如：服务器已经识别到你的爬虫程序，但是为了迷惑你，所以依旧返回200状态码，但是响应体中并没有数据。所以，在爬虫中，所有状态码都不一定可信，一切以是否从抓包得到的响应中获取到数据为准。

## 4.浏览器请求过程

### 1.浏览器请求和爬虫请求的区别

* 浏览器
  * 发送所有请求，进行渲染
* 爬虫
  * 只发送指定请求，不会渲染

### 2.网页构成

* 骨骼文件
  * html静态文件
* 肌肉文件
  * js/ajax请求
* 皮肤文件
  * css/font/图片等

### 3.爬虫数据抓包过程

根据发送请求的流程分别在骨骼 / 肌肉 / 皮肤响应文件中查找数据，在一个中找到就不用查找其它的了
